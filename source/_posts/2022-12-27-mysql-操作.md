---
title: mysql 操作
date: 2022-12-27 18:16:51
tags:
---

1. 创建数据库 && 创建用户相关
```
CREATE DATABASE jira CHARACTER SET utf8mb4 COLLATE utf8mb4_bin;
GRANT SELECT,INSERT,UPDATE,DELETE,CREATE,DROP,ALTER,INDEX on jira.* TO 'jira'@'%' IDENTIFIED BY '123456';
flush privileges;

CREATE DATABASE bitbucket CHARACTER SET utf8 COLLATE utf8_bin;
CREATE USER 'bitbucket'@'%' IDENTIFIED BY '123456';
GRANT ALL PRIVILEGES ON bitbucket.* TO 'bitbucket'@'%';
FLUSH PRIVILEGES;
```
2. mysql备份
```
mysqldump -uroot -p123456 --databases jira bitbucket | gzip > /tmp/atl-$(date +%Y%m%d).sql.gz //生成sql压缩文件
mysqldump -uroot -p123456 --databases jira bitbucket > /tmp/atl-$(date +%Y%m%d).sql //生成sql文件
```
3. 开启慢查询
```
set global slow_query_log='ON';
cd /var/log/mysql/
touch slow.log
chown mysql.  slow.log
set global slow_query_log_file='/var/log/mysql/slow.log';
set global long_query_time=2;
```
4. 查看和修改最大连接数
```
show variables like '%max_connections%';
set GLOBAL max_connections = 200;
```
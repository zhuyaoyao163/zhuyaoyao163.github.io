---
title: ssh 远程执行命令
date: 2023-01-09 17:42:39
tags:
---
### ssh 主要参数说明:
```
-l 指定登入用户

-p 设置端口号

-f 后台运行，并推荐加上 -n 参数

-n 将标准输入重定向到 /dev/null，防止读取标准输入

-N 不执行远程命令，只做端口转发

-q 安静模式，忽略一切对话和错误提示

-T 禁用伪终端配置
```

### ssh 执行远程命令格式
` ssh [options][remote host][command]
`
### ssh远程执行命令并退出
1. ssh退出，可以在ssh执行完之后kill掉这个进程，需要ssh用到-f参数使ssh在后台运行
```
eg:
ssh -f -n $user@$host '/data/ugc/api.sh'
pid=$(ps aux | grep "ssh -f -n $user@$host /data/ugc/api.sh" | awk '{print $2}' | sort -n | head -n 1)
sleep 10 && kill ${pid}
exit 0
```
